<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClearOps</title>
    <link rel="stylesheet" th:href="@{/css/output.css}">
    <script th:src="@{/webjars/htmx.org/dist/htmx.min.js}"></script>
    <script th:src="@{/webjars/alpinejs/dist/cdn.min.js}" defer></script>
</head>
<body class="bg-gray-50 text-gray-900" x-data="{ sidebarOpen: true }">

<div th:replace="~{fragments/header :: header}"></div>

<div class="flex pt-16 overflow-hidden">
    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <main layout:fragment="content" class="relative w-full h-full overflow-y-auto min-h-screen p-6">
    </main>
</div>

<script>
    document.body.addEventListener('htmx:configRequest', (event) => {
        let csrfHeader = document.querySelector('meta[name="_csrf_header"]')?.content;
        let csrfToken = document.querySelector('meta[name="_csrf"]')?.content;
        if (csrfHeader && csrfToken) {
            event.detail.headers[csrfHeader] = csrfToken;
        }
    });
</script>
</body>
</html>